   at async <anonymous> (/home/runner/workspace/server/routes.ts:1286:24) {
  status: 400,
  headers: {
    'access-control-expose-headers': 'X-Request-ID',
    'alt-svc': 'h3=":443"; ma=86400',
    'cf-cache-status': 'DYNAMIC',
    'cf-ray': '94c4fd32ae29f14b-ORD',
    connection: 'keep-alive',
    'content-length': '219',
    'content-type': 'application/json',
    date: 'Sun, 08 Jun 2025 02:34:15 GMT',
    'openai-organization': 'user-6h8i6kgoqr0gdktvm8bnlplz',
    'openai-processing-ms': '24',
    'openai-version': '2020-10-01',
    server: 'cloudflare',
    'set-cookie': '__cf_bm=_fLR3EeMCJX4Z.pSTES9NSXnlulITuZEadjFdc2sboE-1749350055-1.0.1.1-cbgJc4ynGTKb9vejz_NtzUi3A5shjXaZl94F35d9NiJ3gdRsCTgOv8Sb_R0hzbOlYfKODBpxmwJhz6vllkXD_zdAbekhVLW2oQBlVhlXm7A; path=/; expires=Sun, 08-Jun-25 03:04:15 GMT; domain=.api.openai.com; HttpOnly; Secure; SameSite=None, _cfuvid=h64YZIF5tpWACWrvm6n8CtcsWS2ytoSfQDEoGZ21Kfs-1749350055457-0.0.1.1-604800000; path=/; domain=.api.openai.com; HttpOnly; Secure; SameSite=None',
    'strict-transport-security': 'max-age=31536000; includeSubDomains; preload',
    'x-content-type-options': 'nosniff',
    'x-envoy-upstream-service-time': '29',
    'x-ratelimit-limit-requests': '5000',
    'x-ratelimit-limit-tokens': '800000',
    'x-ratelimit-remaining-requests': '4999',
    'x-ratelimit-remaining-tokens': '799986',
    'x-ratelimit-reset-requests': '12ms',
    'x-ratelimit-reset-tokens': '0s',
    'x-request-id': 'req_7a21f3a43360fcf905e64551b475e79f'
  },
  request_id: 'req_7a21f3a43360fcf905e64551b475e79f',
  error: {
    message: "'messages' must contain the word 'json' in some form, to use 'response_format' of type 'json_object'.",
    type: 'invalid_request_error',
    param: 'messages',
    code: null
  },
  code: null,
  param: 'messages',
  type: 'invalid_request_error'
}
Error details: Error: 400 'messages' must contain the word 'json' in some form, to use 'response_format' of type 'json_object'.
    at Function.generate (/home/runner/workspace/node_modules/openai/src/error.ts:72:14)
    at OpenAI.makeStatusError (/home/runner/workspace/node_modules/openai/src/core.ts:462:21)
    at OpenAI.makeRequest (/home/runner/workspace/node_modules/openai/src/core.ts:526:24)
    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)
    at async <anonymous> (/home/runner/workspace/server/routes.ts:1286:24)
2:34:15 AM [express] POST /api/campaigns/advance-story 500 in 1147ms :: {"message":"Failed to advanc…
Query: select "id", "username", "password", "email", "display_name", "last_login", "created_at" from "users" where "users"."id" = $1 -- params: [2]
Query: select "id", "username", "password", "email", "display_name", "last_login", "created_at" from "users" where "users"."id" = $1 -- params: [2]
Query: select "id", "user_id", "title", "description", "difficulty", "narrative_style", "current_session", "current_turn_user_id", "is_turn_based", "turn_time_limit", "turn_started_at", "xp_reward", "is_archived", "is_completed", "completed_at", "is_published", "published_at", "deployment_code", "is_private", "max_players", "created_at", "updated_at" from "campaigns"
Query: select "users"."id", "users"."username", "users"."display_name", "campaign_participants"."joined_at", "campaign_participants"."role", "campaign_participants"."is_active" from "campaign_participants" inner join "users" on "campaign_participants"."user_id" = "users"."id" where "campaign_participants"."campaign_id" = $1 -- params: [3]
Query: select "users"."id", "users"."username", "users"."display_name", "campaign_participants"."joined_at", "campaign_participants"."role", "campaign_participants"."is_active" from "campaign_participants" inner join "users" on "campaign_participants"."user_id" = "users"."id" where "campaign_participants"."campaign_id" = $1 -- params: [4]
Query: select "users"."id", "users"."username", "users"."display_name", "campaign_participants"."joined_at", "campaign_participants"."role", "campaign_participants"."is_active" from "campaign_participants" inner join "users" on "campaign_participants"."user_id" = "users"."id" where "campaign_participants"."campaign_id" = $1 -- params: [5]
Query: select "id", "campaign_id", "session_number", "title", "narrative", "location", "choices", "session_xp_reward", "is_completed", "completed_at", "created_at", "updated_at" from "campaign_sessions" where "campaign_sessions"."campaign_id" = $1 order by "campaign_sessions"."session_number" asc -- params: [8]
Query: select "users"."id", "users"."username", "users"."display_name", "campaign_participants"."joined_at", "campaign_participants"."role", "campaign_participants"."is_active" from "campaign_participants" inner join "users" on "campaign_participants"."user_id" = "users"."id" where "campaign_participants"."campaign_id" = $1 -- params: [7]
Query: select "users"."id", "users"."username", "users"."display_name", "campaign_participants"."joined_at", "campaign_participants"."role", "campaign_participants"."is_active" from "campaign_participants" inner join "users" on "campaign_participants"."user_id" = "users"."id" where "campaign_participants"."campaign_id" = $1 -- params: [1]
Query: select "users"."id", "users"."username", "users"."display_name", "campaign_participants"."joined_at", "campaign_participants"."role", "campaign_participants"."is_active" from "campaign_participants" inner join "users" on "campaign_participants"."user_id" = "users"."id" where "campaign_participants"."campaign_id" = $1 -- params: [8]
Query: select "users"."id", "users"."username", "users"."display_name", "campaign_participants"."joined_at", "campaign_participants"."role", "campaign_participants"."is_active" from "campaign_participants" inner join "users" on "campaign_participants"."user_id" = "users"."id" where "campaign_participants"."campaign_id" = $1 -- params: [6]
Query: select "users"."id", "users"."username", "users"."display_name", "campaign_participants"."joined_at", "campaign_participants"."role", "campaign_participants"."is_active" from "campaign_participants" inner join "users" on "campaign_participants"."user_id" = "users"."id" where "campaign_participants"."campaign_id" = $1 -- params: [2]
2:34:18 AM [express] GET /api/campaigns/8/sessions 304 in 423ms :: [{"id":124,"campaignId":8,"sessio…
2:34:18 AM [express] GET /api/campaigns 304 in 447ms :: [{"id":3,"userId":2,"title":"Veils of the Ve…
Query: select "id", "username", "password", "email", "display_name", "last_login", "created_at" from "users" where "users"."id" = $1 -- 